<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promises in JS</title>
</head>
<body style="background-color: #212121; color: #fff;">
    <h2>Asyncronious Programing</h2>
    <script>
        const promise_1= new Promise(function(resolve , reject){   // 2 parts of promise resolve and reject
            // Do and async call
            // DB calls , cryptography , network
            setTimeout(function(){
                console.log('Async task is complete');
                resolve()  // connect the .then with resolve then its run
            },1000)
        })
        promise_1.then(function(){   // consumption of promise
            console.log('Promoise consume');
        })
        //                       or
        new Promise(function(resolve , reject){
             setTimeout(function(){
            console.log('Async task 2');
            resolve()
            
             },1000)
        }).then(function(){
            console.log("Async 2 is resolved");
            
        })

        const promise_3 = new Promise(function (resolve , reject){
            setTimeout(function(){
             resolve({
            userName: "chai" ,
            email: 'chai@gmail.com',
            age : 21
            })
            },1000)
        })
        promise_3.then(function(user){
        console.log(user);
        })

        const promise_4 = new Promise(function(resolve, reject){
            setTimeout(function(){
            let erorr = false
            if(!erorr){
                resolve({userName : "Shifa", password: 321})
            }else{
                reject('ERORR : Somethig went wrong')
            }
            },1000)
        })
        promise_4.then((user)=>{  //how to avoide callBack hell
        console.log(user);
        return user.userName
           })
           .then((userName)=>{   // work in database connection
        console.log(userName); 
           })
           .catch(function(erorr){
            console.log(erorr);
           }).finally(() =>{
            console.log('The promise is either resoved or rejected');
            
           })
           
        const promise_5  = new Promise(function(resolve, reject) {
          setTimeout(function(){
            let erorr = true   // if erorr acour this is an other way to solve a erorr 
            if(!erorr){
             resolve({userName: "JavaScript" , password:'432'})
            }else{
                reject('ERORR: JS went wrong')
            }
          },1000)
           });
           async function consumePromiseFive (){
            try {
            const response= await promise_5
            console.log(response);
            }catch (erorr){
                console.log(erorr);   
            }
           }
           consumePromiseFive ();
//               ****************************************
        //    async function getallUsers() {
        //     try{
        //    const response = await fetch('https://api.github.com/users/hiteshchoudhary')
        //       const data = await response.json () 
        //    console.log(data);
        //    }
        //    catch (erorr){
        //     console.log("E:" , erorr);
        //    }   
        // }
        // getallUsers()

//        ************** or ********************
        fetch('https://api.github.com/users/hiteshchoudhary')
           .then((response) => {
            return response.json()
           })
           .then((data) => {
            console.log(data);
            
           })
           .catch((erorr) => {
            console.log(erorr);
             
           })
        
    </script>
</body>
</html>